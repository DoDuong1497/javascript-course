<!DOCTYPE html>
<html>
<head>
  <title>higher-order-function</title>
</head>
<body>

  <h1 id="dataType">higher-order-function</h1>

  <!-- internal script -->
  <script type="text/javascript">
    function sum(x) {
      return x + 5;
    }

    function applyTwice(func, arg) {
      // 1. func(arg) -> sum(10) 0> 15
      // 2. function(function(arg)) -> sum(sum(10)) -> sum(15) -> 20
      return func(func(arg))
    }
    const result = applyTwice(sum, 10);
    console.log("result: ", result)   

    // example
    const animals = [
      { name: 'a', species: 'rabbit' },
      { name: 'b', species: 'dog' },
      { name: 'c', species: 'dog' },
      { name: 'd', species: 'fish' },
      { name: 'e', species: 'cat' },
      { name: 'f', species: 'fish' },
    ];

    // hof
    const isDog = animal => animal.species === 'dog'; // arrow function\
    const isCat = animal => animal.species === 'cat';
    const dogs = animals.filter(isDog);
    const cats = animals.filter(isCat);

    console.log('dogs: ', dogs);


    // bai tap grade
    let grades = [
      {name: 'John', grade: 8, sex: 'M'},
      {name: 'Sarah', grade: 12, sex: 'F'},
      {name: 'Bob', grade: 16, sex: 'M'},
      {name: 'Johnny', grade: 2, sex: 'M'},
      {name: 'Ethan', grade: 4, sex: 'M'},
      {name: 'Paula', grade: 18, sex: 'F'},
      {name: 'Donald', grade: 5, sex: 'M'},
      {name: 'Jennifer', grade: 13, sex: 'F'},
      {name: 'Courtney', grade: 15, sex: 'F'},
      {name: 'Jane', grade: 9, sex: 'F'}
    ];

    const isMale = (grade) => grade.sex == 'M';
    const isFemale = (grade) => grade.sex == "F";
    const menGrades = grades.filter(isMale);
    const womenGrades = grades.filter(isFemale);

    const average = (dataSource = []) => dataSource.reduce((acc, curr) => {
      return acc + curr.grade;
    }, 0) / grades.length;

    const maxGradesCommon = (dataSource = []) => dataSource.reduce((acc, curr) => {
      return acc.grade > curr.grade ? acc : curr;
    }, {} )

    const minGradesCommon = (dataSource = []) => dataSource.reduce((acc, curr) => {
      return acc.grade < curr.grade ? acc : curr;
    }, {} )

    // tính trung binh
    // const averageGrades = grades.reduce((acc, curr) => {
    //   return acc + curr.grade;
    // }, 0) / grades.length;
    const averageGrades = average(grades)

    // trung bình nam trong lớp 
    const averageMenGrades = average(menGrades);

    // trung bình nữ trong lớp 
    const averageWomenGrades = average(womenGrades);

    // cao nhất lớp
    const maxGrades = maxGradesCommon(grades);

    // cao nhất nam trong lớp
    const maxMenGrades = maxGradesCommon(menGrades)
    
    // cao nhất nữ trong lớp
    const maxWomenGrades = maxGradesCommon(womenGrades)

    // thấp nhất nam trong lớp
    const minMenGrades = minGradesCommon(menGrades)
    
     // thấp nhất nữ trong lớp
    const minWomenGrades = minGradesCommon(womenGrades)

    // thấp nhất lớp
    const minGrade = minGradesCommon(grades);

    console.log('class: ', {
      averageGrades,
      maxGrades,
      minGrade,
      averageMenGrades,
      averageWomenGrades,
      maxMenGrades,
      minWomenGrades,
      minMenGrades
    })

  </script>

</body>
</html>