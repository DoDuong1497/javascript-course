<!DOCTYPE html>
<html>
<head>
  <title>average-grades-hof</title>
</head>
<body>

  <h1 id="dataType">higher-order-function</h1>

  <!-- internal script -->
  <script type="text/javascript">
    // bai tap grade
    let grades = [
      {name: 'John', grade: 8, sex: 'M'},
      {name: 'Sarah', grade: 12, sex: 'F'},
      {name: 'Bob', grade: 16, sex: 'M'},
      {name: 'Johnny', grade: 2, sex: 'M'},
      {name: 'Ethan', grade: 4, sex: 'M'},
      {name: 'Paula', grade: 18, sex: 'F'},
      {name: 'Donald', grade: 5, sex: 'M'},
      {name: 'Jennifer', grade: 13, sex: 'F'},
      {name: 'Courtney', grade: 15, sex: 'F'},
      {name: 'Jane', grade: 9, sex: 'F'}
    ];

    const isMale = (grade) => grade.sex == 'M';
    const isFemale = (grade) => grade.sex == "F";
    const getBoys = (dataSource = []) => dataSource.filter(isMale);
    const getGirls = (dataSource = []) => dataSource.filter(isFemale);
    const menGrades = grades.filter(isMale);
    const womenGrades = grades.filter(isFemale);

    const average = (dataSource = []) => dataSource.reduce((acc, curr) => {
      return acc + curr.grade;
    }, 0) / grades.length;

    const maxGradesCommon = (dataSource = []) => dataSource.reduce((acc, curr) => {
      return acc.grade > curr.grade ? acc : curr;
    }, {} )

    const minGradesCommon = (dataSource = []) => dataSource.reduce((acc, curr) => {
      return acc.grade < curr.grade ? acc : curr;
    }, {} )

    // tính trung binh
    const averageGrades = average(grades)

    // trung bình nam trong lớp 
    const averageMenGrades = average(getBoys(grades));

    // trung bình nữ trong lớp 
    const averageWomenGrades = average(womenGrades);

    // cao nhất lớp
    const maxGrades = maxGradesCommon(grades);

    // cao nhất nam trong lớp
    const maxMenGrades = maxGradesCommon(menGrades)
    
    // cao nhất nữ trong lớp
    const maxWomenGrades = maxGradesCommon(womenGrades)

    // thấp nhất nam trong lớp
    const minMenGrades = minGradesCommon(menGrades)
    
     // thấp nhất nữ trong lớp
    const minWomenGrades = minGradesCommon(womenGrades)

    // thấp nhất lớp
    const minGrade = minGradesCommon(grades);

    console.log('class: ', {
      averageGrades,
      maxGrades,
      minGrade,
      averageMenGrades,
      averageWomenGrades,
      maxMenGrades,
      minWomenGrades,
      minMenGrades
    })

  </script>

</body>
</html>