<!DOCTYPE html>
<html>
  <head>
    <title>Array</title>
  </head>
  <body>
    <h1 id="dataType">Array</h1>

    <script type="text/javascript">
      const numbs = [1, 2, 3, 4, 5]; // number[]
      const names = ['tony', 'peter', 'steve']; // string[]
      const todos = [
        {
          id: 1,
          title: 'todo 1',
        },
        {
          id: 2,
          title: 'todo 2',
        },
      ]; // object[]

      // array -> index: 0, 1, 2, 3 ... n
      // get item in array
      const todoFirst = todos[1];

      // loop array
      for (const index in todos) {
        console.log('for ... in: ', {
          index,
          todo: todos[index],
        });
      }

      // push
      todos.push({
        id: 3,
        title: 'todo 3',
      });
      const todoLength = todos.length;

      console.log('push: ', {
        todos,
      });

      /*
      splice(start, deleteCount, item1, item2, itemN) - To create a new array 
      concept
        - remove 1 item of array
        - add new 1 item into array
        - replace existing item in array: [1,2,3,4]; item = 5 & index = 2 => [1,2,5,4]
      params:
       - start (require): index of array. Ex: [].splice(2) -> calc from index 2
       - deleteCount (optional): number of item will be removed. Ex: [].splice(2, 2) -> remove 2 items from index 2
       - item1, item2, itemN (optional): items will be added into array. Ex: [].splice(1, 1, 3) -> remove 1 items from index 1 and add item 3 into array
      Sample:
        - [].splice(2) -> remove 1 item from index 2
        - [].splice(2, 2) -> remove 2 items from index 2
        - [].splice(2, 2, 3) -> remove 2 items from index 2 and add item 3 into array
        - [].splice(1, 0, 3) -> add item 3 into array from index 1
    */
      const instrument = ['angel', 'clown', 'mandarin', 'sturgeon'];

      // Remove 0 elements before index 2, and insert "drum" and "guitar"
      // const output = ["angel", "clown", "drum", "guitar", "mandarin", "sturgeon"];

      // Remove 2 elements from index 0, and insert "parrot", "anemone" and "blue"
      // const output = ["parrot", "anemone", "blue", "mandarin", "sturgeon"];

      /*  indexOf(searchElement, fromIndex)
          searchElement (require): Element to locate in the array.
          fromIndex (optional): The index to start the search at. 

          - The indexOf() method returns the first index at which a given element can be found in the array, or -1 if it is not present.
        - If you need to find the index of a value,
      */

      const namesArray = ['tony', 'peter', 'steve', 'truong', 'duong']; // string[], // number[]
      const nameFromBE = 'steve'; // from BE
      const namesIndex = namesArray.indexOf(nameFromBE); // 2
      if (namesIndex >= 0) {
        console.log('indexOf: found');
      } else {
        console.log('indexOf: not found');
      }

      /* filter
          The filter() method creates a new array with all elements that pass the test implemented by the provided function.
          Syntax:  filter(ele => { â€¦ })
      */
      const country = [
        { id: 1, title: 'VN' },
        { id: 2, title: 'US' },
        { id: 3, title: 'UK' },
        { id: 4, title: 'JP' },
        { id: 5, title: 'CN' },
      ];
      // delete country UK from array
      const countryFiltered = country.filter((ele) => {
        return ele.title !== 'UK';
      });

      /* findIndex -> apply object[]
      - If you need the index of the found element in the array, use findIndex().
      - The findIndex() method returns the index of the first element in the array that satisfies the provided testing function. Otherwise, it returns -1
    */
      const addressVN = [
        { id: 1, title: 'HCM' },
        { id: 2, title: 'HN' },
        { id: 3, title: 'DN' },
        { id: 4, title: 'HP' },
        { id: 5, title: 'CT' },
      ];
      const addressFromBE = 'DN';
      const addressIndex = addressVN.findIndex(
        (element) => element.title === addressFromBE
      );
      // exercise 1: change title 'HP' => 'Hai Phong'

      // exercise 2:
      /*
  - change all title short hand = full name
  - show length of title
  - in ra output2 with title length > 10
    const output = [
      { id: 1, title: 'Ho Chi Minh', titleLengh: 12},
      { id: 2, title: 'Ha Noi', titleLengh: 6},
      { id: 3, title: 'Da Nang', titleLengh: 8},
      { id: 4, title: 'Hai Phong', titleLengh: 10},
      { id: 5, title: 'Can Tho', titleLengh: 8},
    ]
    const output2 = [
      { id: 1, title: 'Ho Chi Minh', titleLengh: 12},
      { id: 4, title: 'Hai Phong', titleLengh: 10},
    ]

  */

      /* map
    The map() method creates a new array populated with the results of calling a provided function on every element in the calling array.
  */
      const todosBE = [
        { title: 'learn javascript' },
        { title: 'learn reactjs' },
        { title: 'learn aodejs' },
      ];
      //  const newTodos = [];
      //  for(const todo of todosBE) {
      //   const newItem = {
      //     ...todo,
      //     id: Math.random().toString(),
      //   }
      //   newTodos.push(newItem);
      //  }
      const newTodos = todosBE.map((todo) => {
        return {
          ...todo, // copy property of object
          id: Math.random().toString(),
        };
      });
      console.log('array map: ', newTodos);

      // sort
      const numbers = [1, 3, 1000, 3000, 5, 6, 2];
      // 1, 3 => 1 > 3 => 1, 3
      // 3, 1000 => 3 > 1000 => 3, 1000
      // 1000, 3000 => 1000 > 3000 => 1000, 3000
      // 3000, 5 => 3000 > 5 => 5, 3000
      // 3000, 6 => 3000 > 6 => 6, 3000
      // 3000, 2 => 3000 > 2 => 2, 3000
      const numberSorted = numbers.sort((a, b) => {
        if (a > b) {
          return 1;
        }
        if (a < b) {
          return -1;
        }
        return 0;
      });
      console.log('array sort numberSorted: ', numberSorted);

      const todoSorted = todosBE.sort((a, b) => {
        if (a.title > b.title) {
          return 1;
        }
        if (a.title < b.title) {
          return -1;
        }
        return 0;
      });

      console.log('array sort todoSorted: ', todoSorted);

      /* some
    - The some() method tests whether at least one element in the array passes the test implemented by the provided function.
    - Return boolean value.
    - it finds an element for which the provided function returns true; otherwise it returns false. It doesn't modify the array.
  */
      let loopCheckSome = 0;
      const isEven = numbers.some((item) => {
        loopCheckSome++;
        return item % 2 !== 0;
      });
      console.log('array some isEven: ', loopCheckSome, isEven);

      /* every
    - The every() method tests whether all elements in the array pass the test implemented by the provided function. 
    - It returns a Boolean value.
  */
      let loopCheckEvery = 0;
      const isCorrect = numbers.every((item) => {
        loopCheckEvery++;
        return item % 2 === 0;
      });
      console.log('array every: ', loopCheckEvery, isCorrect);

      /* find
    The find() method returns the value of the first element in the provided array that satisfies the provided testing function. If no values satisfy the testing function, undefined is returned.
  */
      const books = [
        { id: 1, title: 'book 1', price: 1000, author: 'tony' },
        { id: 2, title: 'book 2', price: 2000, author: 'duong' },
        { id: 3, title: 'book 3', price: 3000, author: 'truong' },
        { id: 73, title: 'book 12', price: 3000, author: 'truong' },
        { id: 23, title: 'book 10', price: 3000, author: 'truong' },
        { id: 4, title: 'book 4', price: 4000, author: 'kim' },
        { id: 5, title: 'book 5', price: 5000, author: 'john' },
      ];
      const name = 'wqeqweqw';
      const bookItem = books.find((item) => item.author === name);
      const bookFilters = books.filter((item) => item.author === name);
      console.log('array find: ', { bookItem, bookFilters });

      // array
      const numbersCount = [1, 2, 3, 4, 5, 6, 7, 8, 9];
      const total = numbersCount.reduce((acc, curr) => {
        acc = acc + curr;
        // first call: 5 + 1 = 6
        // second call: 6 + 2 = 8
        // ...
        return acc;
      }, 0);
      console.log('array reduce: ', total);

      // shopping cart
      const products = [
        { name: 'banana', quality: 10, price: 20 },
        { name: 'laptop', quality: 2, price: 15 },
        { name: 'iphone', quality: 10, price: 4 },
      ];
      // output: 10 * 20 + 2 * 15 + 10 * 4 = 270
      const totalCarts = products.reduce((acc, curr) => {
        const quality = curr.quality;
        const price = curr.price;
        acc += quality * price;
        return acc;
      }, 0);
      console.log('array reduce totalCarts: ', totalCarts);

      // count values in objects
      const identifies = ['Truong', 'Tony', 'Hau', 'Truong', 'Truong', 'Hau'];
      /*
    output
    {
      'Truong': 3,
      'Tony': 1,
      'Hau': 2
    }
  */
      const countIdentifies = identifies.reduce((acc, curr) => {
        return acc;
      }, {});

      // group object by a property
      const peoples = [
        { name: 'Truong', age: 20 },
        { name: 'Hau', age: 20 },
        { name: 'Tony', age: 32 },
        { name: 'Duy', age: 21 },
        { name: 'Duy', age: 20 },
      ];
      /*
      output group by age
      {
        20: [
          { name: 'Truong', age: 20 },
          { name: 'Hau', age: 20 },
        ],
        32: [
          { name: 'Tony', age: 32 },
        ],
        21: [
          { name: 'Duy', age: 21 }
        ]
      }
    */

      // map -> array return new array
      // loop, filter -> return new array
      // array -> object -> reduce is array method
      function groupByProperty(property) {
        const res = peoples.reduce((acc, currItem) => {
          const key = currItem[property];
          if (!acc[key]) {
            acc[key] = [];
          }
          acc[key].push(currItem);
          return acc;
        }, {});

        return res;
      }
      const outputGroupByProperty = groupByProperty('name');
      console.log('group object by a property: ', outputGroupByProperty);

      // reduce concat array
      const friends = [
        {
          name: 'Anna',
          books: ['Bible', 'Harry Potter'],
          age: 21,
        },
        {
          name: 'Bob',
          books: ['War and peace', 'Romeo and Juliet'],
          age: 26,
        },
        {
          name: 'Alice',
          books: ['The Lord of the Rings', 'The Shining'],
          age: 18,
        },
      ];

      const resFriend = friends.reduce((acc, currItem) => {
        let value = currItem['books'];

        return acc.concat(value);
      }, []);

      console.log('resFriend:', resFriend);

      /*
    output
    [
      'Bible', 'Harry Potter', 'War and peace', 'Romeo and Juliet', 'The Lord of the Rings', 'The Shining'
    ]
  */
    </script>
  </body>
</html>
