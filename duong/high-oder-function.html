<!DOCTYPE html>
<html>
  <head>
    <title>higher-order-function</title>
  </head>
  <body>
    <h1 id="dataType">higher-order-function</h1>

    <!-- internal script -->
    <script type="text/javascript">
      const animals = [
        { name: 'a', species: 'rabbit' },
        { name: 'b', species: 'dog' },
        { name: 'c', species: 'dog' },
        { name: 'd', species: 'fish' },
        { name: 'e', species: 'cat' },
        { name: 'f', species: 'fish' },
      ];

      // const dogs = [];

      // for (let i = 0; i < animals.length; i++) {
      //   if (animals[i].species === 'dog') {
      //     dogs.push(animals[i]);
      //   }
      // }
      // console.log('dogs:', dogs);

      // HOF
      const isDog = (animal) => animal.species === 'dog';
      const isCat = (animal) => animal.species === 'cat';

      const dogHOF = animals.filter(isDog);
      console.log('dogHOF:', dogHOF);
      const catHOF = animals.filter(isCat);
      console.log('catHOF:', catHOF);

      //Bai tap
      var grades = [
        { name: 'John', grade: 8, sex: 'M' },
        { name: 'Sarah', grade: 12, sex: 'F' },
        { name: 'Bob', grade: 16, sex: 'M' },
        { name: 'Johnny', grade: 2, sex: 'M' },
        { name: 'Ethan', grade: 4, sex: 'M' },
        { name: 'Paula', grade: 18, sex: 'F' },
        { name: 'Donald', grade: 5, sex: 'M' },
        { name: 'Jennifer', grade: 13, sex: 'F' },
        { name: 'Courtney', grade: 15, sex: 'F' },
        { name: 'Jane', grade: 9, sex: 'F' },
      ];

      /*
        Tìm thứ hạng trung bình của cả lớp 
        Tìm thứ hạng trung bình của nam trong lớp 
        Tìm thứ hạng trung bình của Nữ trong lớp 
        Tìm thứ hạng cao nhất của Nam trong lớp 
        Tìm thứ hạng cao nhất của Nữ trong lớp
        Tìm thứ hạng thấp nhất của Nam trong lớp 
        Tìm thứ hạng thấp nhất của Nữ trong lớp 
        Tìm thứ hạng cao nhất của cả lớp 
        Tìm thứ hạng thấp nhất của cả lớp
      */

      const averageClass =
        grades.reduce((acc, curr) => {
          return acc + curr.grade;
        }, 0) / grades.length;
      console.log('averageClass: ', averageClass);

      const classMan = grades.filter((item) => item.sex === 'M');
      const averageClassMan =
        classMan.reduce((acc, curr) => {
          return acc + curr.grade;
        }, 0) / classMan.length;
      console.log('averageClassMan: ', averageClassMan);

      const maxGradeMan = classMan.reduce((acc, curr) => {
        // loop 1: null > 8  => {name: 'John', grade: 8, sex: 'M'},
        // loop 2: 8 > 16 => {name: 'Bob', grade: 16, sex: 'M'},
        return acc.grade > curr.grade ? acc : curr;
      }, {});
      console.log('maxGradeMan: ', maxGradeMan.grade);
    </script>
  </body>
</html>
