<!DOCTYPE html>
<html>
<head>
  <title>higher-order-function</title>
</head>
<body>

  <h1 id="dataType">higher-order-function</h1>

  <!-- internal script -->
  <script type="text/javascript">
    function sum(x) {
      return x + 5;
    }

    function applyTwice(func, arg) {
      // 1. func(arg) -> sum(10) 0> 15
      // 2. function(function(arg)) -> sum(sum(10)) -> sum(15) -> 20
      return func(func(arg))
    }
    const result = applyTwice(sum, 10);
    console.log("result: ", result)   

    // example
    const animals = [
      { name: 'a', species: 'rabbit' },
      { name: 'b', species: 'dog' },
      { name: 'c', species: 'dog' },
      { name: 'd', species: 'fish' },
      { name: 'e', species: 'cat' },
      { name: 'f', species: 'fish' },
    ];
    /* normal function */
    const dogs = [];
    for(var i = 0; i < animals.length; i++) {
      if(animals[i].species == 'dog') {
        dogs.push(animals[i])
      }
    }
    console.log('normal animals function: ', dogs);

    // bai tap grade
    let grades = [
      {name: 'John', grade: 8, sex: 'M'},
      {name: 'Sarah', grade: 12, sex: 'F'},
      {name: 'Bob', grade: 16, sex: 'M'},
      {name: 'Johnny', grade: 2, sex: 'M'},
      {name: 'Ethan', grade: 4, sex: 'M'},
      {name: 'Paula', grade: 18, sex: 'F'},
      {name: 'Donald', grade: 5, sex: 'M'},
      {name: 'Jennifer', grade: 13, sex: 'F'},
      {name: 'Courtney', grade: 15, sex: 'F'},
      {name: 'Jane', grade: 9, sex: 'F'}
    ];

    // tính trung binh
    const averageGrades = grades.reduce((acc, curr) => {
      return acc + curr.grade;
    }, 0) / grades.length;

    // trung bình nam trong lớp 
    const menGrades = grades.filter((grade) => grade.sex == 'M');
    const averageMenGrades = menGrades.reduce((acc, curr) => {
      return acc + curr.grade;
    }, 0) / grades.length;

    // trung bình nữ trong lớp 
    const womenGrades = grades.filter((grade) => grade.sex == "F");
    const averageWomenGrades = womenGrades.reduce((acc, curr) => {
      return acc + curr.grade;
    }, 0) / grades.length;

    // cao nhất nam trong lớp
    const maxMenGrades = menGrades.reduce((acc, curr) => {
      return acc.grade > curr.grade ? acc : curr;
    }, {} )
    // cao nhất nữ trong lớp
    const maxWomenGrades = womenGrades.reduce((acc, curr) => {
      return acc.grade > curr.grade ? acc : curr;
    }, {} )

    // thấp nhất nam trong lớp
    const minMenGrades = menGrades.reduce((acc, curr) => {
      return acc.grade < curr.grade ? acc : curr;
    }, {} )

     // thấp nhất nữ trong lớp
     const minWomenGrades = womenGrades.reduce((acc, curr) => {
      return acc.grade < curr.grade ? acc : curr;
    }, {} )
    // cao nhất lớp
    const maxGrades = grades.reduce((acc, curr) => {
      // loop 1: null > 8  => {name: 'John', grade: 8, sex: 'M'},
      // loop 2: 8 > 16 => {name: 'Bob', grade: 16, sex: 'M'},
      return acc.grade > curr.grade ? acc : curr;
    }, {})
    // thấp nhất lớp
    const minGrade = grades.reduce((acc, curr) => {
      return acc.grade < curr.grade ? acc : curr;
    }, {});

    console.log('class: ', {
      averageGrades,
      maxGrades,
      minGrade,
      averageMenGrades,
      averageWomenGrades,
      maxMenGrades,
      minWomenGrades
    })
  </script>

</body>
</html>